## chapter08 환경
### 8.1 환경 기초
* 환경은 list, atomic vector와 같이 하나의 객체로서 생각할 수 있음
* 환경의 역할은 값에 이름을 연결 또는 바인딩하기 위한 것
* 환경은 이름 주머니라고 생각 할 수 있음
* 각 이름은 메모리 어딘가에 저장되어 있는 객체
~~~
e   <- new.env()
e$a <- FALSE
e$b <- "a"
e$c <- 2.3
e$d <- 1:3
~~~
* 객체는 복수의 이름이 같은 객체를 가리킬 수 있음
~~~
e$a <- e$d
~~~
* 환경은 다른 값을 가진 다른 객체를 가리킬 수 있음
~~~
e$a <- 1:3
~~~
* 객체가 이름을 갖고 있지 않으면 자동으로 garbage collector에 의해 삭제됨
* 모든 환경은 부모로 다른 환경을 가짐
* 어떤 이름이 특정 환경에서 발견되지 않으면 R은 그것의 부모를 찾고, 이런 작업을 반복함
* 공환경(empty environment)만 부모를 가지지 않음
* 일반적으로 4가지만 제외하면 환경은 리스트와 유사
  * 환경의 모든 객체는 유일한 이름을 가짐
  * 환경 내에 객체는 순서가 없음
  * 환경은 부모를 가짐
  * 환경은 참조 시맨틱스를 가짐  
* 환경은 두 가지 요소로 구성되어 있음
  * 이름-객체 바인딩을 포함하고 있는 frame
  * 부모 환경
* 네 가지 특수한 환경 존재
  * globalenv() 또는 전역 환경.  
    이 환경은 일반적인 작업 환경. 전역 환경의 부모는 library() 또는 require()로 붙인 마지막 패키지
  * baseenv() 또는 베이스 환경.  
    base 패키지의 환경. 그 부모는 공환경임
  * emptyenv() 또는 공 환경.  
   모든 환경의 궁극적인 조상. 부모가 없는 유일한 환경
* search()는 전역 환경의 모든 부모를 열거
* as.environment()를 사용하면 검색 목록에 관한 환경에 접근할 수 있음
~~~
search()
as.environment("package::stats")
~~~
* globalenv() -> baseenv() -> emptyenv()로 연결되어 있음(-> 부모/조상 환경)
* 환경을 직접 생성하려면 new.env()를 사용
* ls()로 환경 프레임에서 바인딩을 열거할 수 있고, parent.env()로 그 부모를 확인 할 수 있음
* 환경에서 바인딩을 수정하는 가장 쉬운 방법은 리스트처럼 수정하는 것
~~~
e$a <- 1
e$b <- 2
ls(e)
e$a
~~~
* ls()는 dot(.)으로 시작하는 이름은 보여주지 않음.   
어떤 환경의 모든 바인딩을 보려면 all.names = TRUE를 사용하자
~~~
e$.a <- 2
ls(e)
ls(e, all.names = TRUE)
~~~
* ls.str()를 이용해서도 환경 확인 가능. 이는 환경 내의 각 객체를 보여 주기 때문
~~~
str(e)
ls.str(e)
~~~
* 리스트처럼 $, [[, get()으로 바인딩되어 있는 값을 추출 가능
* 환경에서 바인딩을 제거하려면 rm()을 사용
~~~
e <- new.env()
e$a <- 1
e$a <- NULL
ls(e)

rm("a", envir = e)
ls(e)
~~~
* exists()로 바인딩이 어떤 환경에 존재하는지 판단할 수 있음  
exists의 기본 행동은 부모 환경에서 찾는 것. 원하지 않으면 inherits = FALSE 이용
~~~
x <- 10
exists("x", envir = e)
exists("x", envir = e, inherits = FALSE)
~~~
* 환경을 비교하려면 == 가 아닌, identical를 이용
~~~
identical(globalenv(), environment())
~~~
### 8.3 함수 환경
* 대부분의 환경은 new.env()에 의해서가 아니라 함수 사용의 결과물로 생성
* 함수와 관련된 4가지 유형, 엔클로징, 바인딩, 실행, 호출 환경을 살펴보자

* <b>엔클로징(enclosing)</b> 환경은
*

## 용어 정리
##### 바인딩
* 프로그램의 기본 단위에 해당 기본 단위가 가질 수 있는 속성 중에서 일부 필요한 속성들만 선택하여 연결시켜 주는 것을 말함
* 변수로 예를 들면, 변수를 구성하는 식별자(이름), 자료형 속성, 하나 이상의 주소(참조), 자료값에 구체적인 값으로 확정하는 것을 말함
